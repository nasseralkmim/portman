=portman= is a package to process your trade data.

* Features

1. Simple =.csv= input file.
2. Snapshot of portfolio *core* information.
   1. share holdings (what do you have?).
   2. average purchase price (how much did you pay for it?).
   3. current market price (what is the current price?).
   4. profit and loss on position (how much I'm gaining or losing?).
3. Dashboard visualization of snapshot.
   1. asset class distribution (stocks, etf, reit).
   2. stocks distribution by sector.


* Input
The input is a simple =.csv= file with your transaction history.

#+begin_example
date,type,ticker,shares,price,fee
#+end_example

* Use =portman=
:PROPERTIES:
:header-args:python: :session demo
:header-args:shell: :dir examples/
:END:

Generates a =.csv= file by calling the =portman.process= module with the trades data,

#+begin_src shell
python -m portman.process "trade_data.csv"
cat portfolio.csv
#+end_src

#+RESULTS:
: ticker,shares,average price ($),market price ($),P/L %,market value ($),Sector
: AMZN,20,17.5,3432.97,19516.971428571425,68659.4,Consumer Cyclical
: GOOG,40,6.25,2527.37,40337.92,101094.79999999999,Communication Services

Can be used in script form.

#+begin_src python
import portman.trades
import portman.portfolio

td = portman.trades.process("examples/trade_data.csv")
por = portman.portfolio.process(td)
print(por)
#+end_src

#+RESULTS:
:         shares  average price ($)  market price ($)         P/L %  \
: ticker                                                              
: AMZN        20              17.50           3432.97  19516.971429   
: GOOG        40               6.25           2527.37  40337.920000   
: 
:         market value ($)                  Sector  
: ticker                                            
: AMZN             68659.4       Consumer Cyclical  
: GOOG            101094.8  Communication Services  


* Todo
** TODO add multiple currencies.
1. this will affect the 
** DONE check how average price was computed (trade.py).
1. naive... but effective enough.
2. it makes difference if you trade frequently.
** DONE check how import/export from potfolio-performance works.
1. csv, good and complete, but it is not as smooth as I expected.
* Changelog

1. <2021-07-02 Fri> added back sub-packages for visualization, performance and income. Since there is a strong dependence of the dataframe structure between visualization and consolidation.
2. <2021-06-28 Mon> Moved visualization to a different package, =portvis=.
   
