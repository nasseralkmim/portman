=portman= is a package to process your trade data.

* Features

1. Simple =.csv= input file
2. Snapshot of portfolio *core* information
   1. holdings net volume (what do you have?)
   2. average purchase price (how much did you pay for it?)
   3. current quote (what is the current price?)
   4. profit and loss on position (how much I'm gaining or losing?)
   5. equity distribution by value and industry (how diversified are my holdings?)

* Input
The input is a simple =.csv= file with your transaction history.

#+begin_src shell
cat examples/trades.csv
#+end_src

#+RESULTS:
#+begin_example
date,type,ticker,volume,price,total,vol_adj
2018-09-17,Buy,EGIE3,40,36.5,1460.0,40
2018-10-03,Buy,ABEV3,28,18.26,511.28000000000003,28
2018-10-16,Buy,ABEV3,30,17.29,518.6999999999999,30
2018-11-07,Buy,ABEV3,25,16.8,420.0,25
2018-12-12,Split,EGIE3,10,0.0,0.0,10
2019-03-15,Sell,EGIE3,25,39.0,-975.0,-25
2020-03-25,Buy,EGIE3,15,38.0,570.0,15
2020-03-25,Buy,EGIE3,10,37.5,375.0,10
2020-07-27,Buy,EGIE3,32,44.7,1430.4,32
#+end_example

* Use =portman=
:PROPERTIES:
:header-args:python: :session demo
:header-args:shell: :dir examples/
:END:

Generates a =.csv= file by calling the =portman.process= module with the trades data,

#+begin_src shell
python -m portman.process "trade_data.csv"
cat portfolio.csv
#+end_src

#+RESULTS:
: ticker,Net vol.,Avg. price ($),Quote ($),P/L %,Cur. val. ($),Sector
: ABEV3,83,17.469638554216868,17.2,-1.5434695650974553,1427.6,Consumer Defensive
: EGIE3,82,34.88292682926829,38.7,10.942525520906175,3173.4,Utilities

Can be used in script form.

#+begin_src python
import portman.trades
import portman.portfolio

td = portman.trades.process("examples/trade_data.csv")
por = portman.portfolio.process(td)
print(por)
#+end_src

#+RESULTS:
:         Net vol.  Avg. price ($)  Quote ($)      P/L %  Cur. val. ($)  \
: ticker                                                                  
: ABEV3         83       17.469639      16.91  -3.203492        1403.53   
: EGIE3         82       34.882927      39.90  14.382604        3271.80   
: 
:                     Sector  
: ticker                      
: ABEV3   Consumer Defensive  
: EGIE3            Utilities  


* Concepts
** Value, quote and price



* Todo
1. check how average price was computed (trade.py).
2. check how import/export from potfolio-performance works.
   1. csv, good and complete, but it is not as smooth as I expected.

* Changelog

1. <2021-06-28 Mon> Moved visualization to a different package, =portvis=.
